{% extends "layout.html" %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/profile.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/galaxy-profile.css') }}">
{% endblock %}

{% block body_class %}galaxy-theme{% endblock %}

{% block content %}
<!-- Cosmic Elements -->
<div class="comet"></div>
<div class="comet"></div>
<div class="comet"></div>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile - CosmicTeams</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/galaxy.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/loaders.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Orbitron:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            font-family: 'Poppins', sans-serif;
            color: #fff;
            min-height: 100vh;
            margin: 0;
            padding: 0;
            position: relative;
            overflow-x: hidden;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(111, 66, 193, 0.3) 0%, transparent 20%),
                radial-gradient(circle at 80% 70%, rgba(91, 34, 201, 0.3) 0%, transparent 20%),
                radial-gradient(circle at 40% 80%, rgba(71, 22, 179, 0.3) 0%, transparent 20%),
                radial-gradient(circle at 60% 10%, rgba(131, 86, 213, 0.3) 0%, transparent 20%);
            z-index: -1;
        }
        
        .profile-container {
            max-width: 1200px;
            margin: 30px auto;
            padding: 20px;
            background: rgba(16, 18, 27, 0.7);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            box-shadow: 0 0 30px rgba(111, 66, 193, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .section-title {
            font-family: 'Orbitron', sans-serif;
            color: #fff;
            margin-bottom: 20px;
            position: relative;
            padding-bottom: 10px;
        }
        
        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100px;
            height: 3px;
            background: linear-gradient(to right, #6f42c1, transparent);
        }
        
        .cosmic-btn {
            background: linear-gradient(135deg, #6f42c1, #8e44ad);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(111, 66, 193, 0.3);
        }
        
        .cosmic-btn:hover {
            background: linear-gradient(135deg, #8e44ad, #6f42c1);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(111, 66, 193, 0.4);
        }
        
        .cosmic-btn.danger {
            background: linear-gradient(135deg, #e53935, #d32f2f);
        }
        
        .cosmic-btn.danger:hover {
            background: linear-gradient(135deg, #d32f2f, #e53935);
        }
        
        input[type="text"],
        input[type="email"],
        input[type="password"],
        textarea {
            width: 100%;
            padding: 12px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: #fff;
            font-family: 'Poppins', sans-serif;
            margin-bottom: 15px;
            transition: all 0.3s ease;
        }
        
        input[type="text"]:focus,
        input[type="email"]:focus,
        input[type="password"]:focus,
        textarea:focus {
            outline: none;
            border-color: #6f42c1;
            box-shadow: 0 0 15px rgba(111, 66, 193, 0.3);
        }
        
        .profile-main {
            padding: 40px 0;
        }
        
        .profile-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            gap: 30px;
        }
        
        .profile-sidebar {
            width: 300px;
            flex-shrink: 0;
        }
        
        .profile-avatar {
            background: rgba(16, 18, 27, 0.7);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 0 30px rgba(111, 66, 193, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
            text-align: center;
            margin-bottom: 20px;
        }
        
        .avatar-image {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            overflow: hidden;
            margin: 0 auto 20px;
            background: rgba(255, 255, 255, 0.1);
            position: relative;
            border: 3px solid rgba(111, 66, 193, 0.5);
            box-shadow: 0 0 15px rgba(111, 66, 193, 0.3);
        }
        
        .avatar-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .avatar-image .default-avatar {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 60px;
            color: rgba(255, 255, 255, 0.7);
        }
        
        .avatar-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .avatar-overlay:hover {
            opacity: 1;
        }
        
        .avatar-overlay i {
            color: white;
            font-size: 30px;
        }
        
        .profile-name {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 5px;
            color: var(--header-color);
            text-shadow: 0 0 8px rgba(111, 66, 193, 0.5);
        }
        
        .profile-username {
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 20px;
        }
        
        .profile-details {
            list-style: none;
            padding: 0;
            margin: 0;
            text-align: left;
        }
        
        .profile-details li {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .profile-details li:last-child {
            margin-bottom: 0;
        }
        
        .profile-details li i {
            width: 30px;
            color: var(--accent-color);
            font-size: 1.1rem;
        }
        
        .profile-nav {
            display: flex;
            background: rgba(16, 18, 27, 0.6);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 20px;
            box-shadow: 0 0 15px rgba(111, 66, 193, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .profile-nav a {
            padding: 15px 20px;
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            position: relative;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .profile-nav a i {
            font-size: 1.1rem;
        }
        
        .profile-nav a:hover {
            color: white;
            background: rgba(111, 66, 193, 0.2);
        }
        
        .profile-nav a.active {
            color: white;
            background: rgba(111, 66, 193, 0.3);
        }
        
        .profile-nav a.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            height: 3px;
            width: 100%;
            background: linear-gradient(90deg, #6f42c1, #8e44ad);
        }
        
        .profile-content {
            flex: 1;
            background: rgba(16, 18, 27, 0.7);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 0 30px rgba(111, 66, 193, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .profile-section {
            margin-bottom: 40px;
        }
        
        .profile-section:last-child {
            margin-bottom: 0;
        }
        
        .profile-section h2 {
            font-size: 1.5rem;
            margin: 0 0 20px 0;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--header-color);
            text-shadow: 0 0 8px rgba(111, 66, 193, 0.5);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-row {
            display: flex;
            gap: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: rgba(255, 255, 255, 0.9);
        }
        
        .form-control {
            width: 100%;
            padding: 12px 15px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: #fff;
            font-family: 'Poppins', sans-serif;
            transition: all 0.3s ease;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 15px rgba(111, 66, 193, 0.3);
        }
        
        textarea.form-control {
            resize: vertical;
            min-height: 120px;
        }
        
        .form-text {
            display: block;
            margin-top: 5px;
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.6);
        }
        
        .alert {
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 8px;
        }
        
        .alert.success {
            background: rgba(0, 201, 255, 0.1);
            border: 1px solid rgba(0, 201, 255, 0.3);
            color: #00c9ff;
        }
        
        .alert.error {
            background: rgba(255, 65, 108, 0.1);
            border: 1px solid rgba(255, 65, 108, 0.3);
            color: #ff416c;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .skill-level {
            position: relative;
            width: 100%;
            height: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
            margin-top: 8px;
        }
        
        .skill-level .level {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            border-radius: 10px;
            background: linear-gradient(to right, #6f42c1, #8e44ad);
        }
        
        .skill-level .level-1 {
            width: 20%;
        }
        
        .skill-level .level-2 {
            width: 40%;
        }
        
        .skill-level .level-3 {
            width: 60%;
        }
        
        .skill-level .level-4 {
            width: 80%;
        }
        
        .skill-level .level-5 {
            width: 100%;
        }
        
        @media (max-width: 992px) {
            .profile-container {
                flex-direction: column;
            }
            
            .profile-sidebar {
                width: 100%;
            }
        }
        
        .tier-explanation-box {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
        }
        
        .tier-format-guide h3 {
            font-family: 'Orbitron', sans-serif;
            color: #fff;
            margin-top: 0;
            margin-bottom: 15px;
        }
        
        .tier-examples {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .tier-example {
            flex: 1;
        }
        
        .tier-example p {
            margin-top: 10px;
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
        }
        
        .tier-icon-small {
            width: 24px;
            height: 24px;
            margin-right: 5px;
            vertical-align: middle;
        }
        
        /* Tier Input Styles */
        .tier-input-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
        }
        
        .tier-input-section h3 {
            font-family: 'Orbitron', sans-serif;
            color: #fff;
            margin-top: 0;
            margin-bottom: 15px;
        }
        
        .tier-input-grid {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .tier-input-row {
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .tier-input-label {
            flex: 1;
            min-width: 200px;
            display: flex;
            align-items: center;
            font-weight: 500;
        }
        
        .tier-input-label img {
            margin-right: 10px;
        }
        
        .tier-input-field {
            flex: 1;
            min-width: 150px;
        }
        
        .tier-input-field input {
            width: 100%;
            padding: 10px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 1rem;
            font-family: 'Poppins', sans-serif;
        }
        
        .tier-input-field input:focus {
            outline: none;
            border-color: #6f42c1;
            box-shadow: 0 0 10px rgba(111, 66, 193, 0.3);
        }
        
        .tier-input-field input.invalid {
            border-color: #dc3545;
            box-shadow: 0 0 10px rgba(220, 53, 69, 0.3);
        }
        
        @media (max-width: 767px) {
            .tier-input-row {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .tier-input-label, .tier-input-field {
                width: 100%;
            }
        }
        
        .quick-tier-selection {
            background: rgba(16, 18, 27, 0.6);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .quick-tier-selection h3 {
            color: white;
            margin-top: 0;
            font-size: 1.2rem;
        }
        
        .quick-tier-selection p {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
            margin-bottom: 20px;
        }
        
        .quick-tier-grid {
            border-radius: 8px;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .quick-tier-row {
            display: flex;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .quick-tier-row:last-child {
            border-bottom: none;
        }
        
        .quick-tier-cell {
            flex: 1;
            padding: 10px;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            border-right: 1px solid rgba(255, 255, 255, 0.05);
            color: rgba(255, 255, 255, 0.9);
            min-width: 40px;
        }
        
        .quick-tier-cell:first-child {
            flex: 2;
            justify-content: flex-start;
            text-align: left;
            font-weight: 600;
        }
        
        .quick-tier-cell:last-child {
            border-right: none;
        }
        
        .header-cell {
            background: rgba(111, 66, 193, 0.2);
            font-weight: 600;
            font-size: 0.85rem;
        }
        
        /* Responsive styles for mobile */
        @media (max-width: 767px) {
            .tier-examples {
                flex-direction: column;
            }
            
            .tier-example {
                min-width: unset;
            }
            
            .quick-tier-grid {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }
            
            .quick-tier-row {
                min-width: 800px;
            }
            
            .quick-tier-cell {
                min-width: 40px;
                padding: 8px 5px;
                font-size: 0.85rem;
            }
            
            .quick-tier-cell:first-child {
                min-width: 80px;
            }
            
            .header-cell {
                font-size: 0.75rem;
            }
            
            .tier-explanation-box, .quick-tier-selection {
                padding: 15px;
            }
        }
        
        /* Style for tier labels */
        .tier-label {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9rem;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        /* LT Tiers */
        .tier-lt1 { background: linear-gradient(135deg, #6c757d, #495057); color: white; }
        .tier-lt2 { background: linear-gradient(135deg, #28a745, #20c997); color: white; }
        .tier-lt3 { background: linear-gradient(135deg, #8f5931, #b56326); color: white; }
        .tier-lt4 { background: linear-gradient(135deg, #007bff, #17a2b8); color: white; }
        .tier-lt5 { background: linear-gradient(135deg, #6f42c1, #8e44ad); color: white; }
        
        /* HT Tiers */
        .tier-ht1 { background: linear-gradient(135deg, #adb5bd, #ced4da); color: #212529; }
        .tier-ht2 { background: linear-gradient(135deg, #ffc107, #fd7e14); color: #212529; }
        .tier-ht3 { background: linear-gradient(135deg, #b56326, #dc3545); color: white; }
        .tier-ht4 { background: linear-gradient(135deg, #e83e8c, #dc3545); color: white; }
        .tier-ht5 { background: linear-gradient(135deg, #dc3545, #6f42c1); color: white; }
    </style>
</head>
<body class="galaxy-theme">
    <header class="cosmic-header">
        <div class="logo">
            <h1>Cosmic<span>Teams</span></h1>
        </div>
        <nav>
            <ul>
                <li><a href="{{ url_for('main') }}">Home</a></li>
                <li><a href="{{ url_for('teams') }}">Teams</a></li>
                <li><a href="{{ url_for('about') }}">About</a></li>
                <li><a href="{{ url_for('profile') }}" class="active">Profile</a></li>
                {% if session.get('is_admin') %}
                <li><a href="{{ url_for('admin_dashboard') }}">Admin</a></li>
                {% endif %}
            </ul>
        </nav>
        <div class="auth-buttons">
            <div class="user-profile">
                <a href="{{ url_for('profile') }}" class="profile-btn cosmic-btn">
                    <i class="fas fa-user-circle"></i>
                    <span>{{ user.username }}</span>
                </a>
                <div class="dropdown-menu">
                    <a href="{{ url_for('profile') }}" class="active"><i class="fas fa-user-cog"></i> Profile</a>
                    <a href="{{ url_for('mail_inbox') }}">
                        <i class="fas fa-envelope"></i> Mail
                        {% if unread_mail_count > 0 %}
                        <span class="mail-badge">{{ unread_mail_count }}</span>
                        {% endif %}
                    </a>
                    <a href="{{ url_for('logout') }}"><i class="fas fa-sign-out-alt"></i> Logout</a>
                </div>
            </div>
        </div>
    </header>

    <main class="profile-main">
        <div class="profile-container">
            <div class="profile-sidebar">
                <div class="profile-avatar">
                    <div class="avatar-image">
                        {% if user.profile_pic %}
                        <img src="{{ url_for('static', filename=user.profile_pic) }}" alt="{{ user.username }}'s profile picture">
                        {% else %}
                        <i class="fas fa-user"></i>
                        {% endif %}
                    </div>
                    <h2>{{ user.username }}</h2>
                    <p>{{ user.email }}</p>
                    <label for="profile-pic-upload" class="upload-avatar-btn">
                        <i class="fas fa-camera"></i> Change Avatar
                    </label>
                    <input type="file" id="profile-pic-upload" accept="image/*" style="display: none;">
                </div>
                <div class="profile-nav">
                    <a href="#basic-info" class="active"><i class="fas fa-user"></i> Basic Info</a>
                    <a href="#skills"><i class="fas fa-trophy"></i> Skills</a>
                    <a href="#security"><i class="fas fa-shield-alt"></i> Security</a>
                    <a href="#privacy"><i class="fas fa-lock"></i> Privacy</a>
                    <a href="#minecraft-tiers"><i class="fas fa-chart-line"></i> Minecraft Tiers</a>
                </div>
            </div>
            
            <div class="profile-content">
                <div class="profile-section" id="account">
                    <h2>Account Settings</h2>
                    <p class="section-description">Update your personal information and account settings.</p>
                    
                    {% if message %}
                    <div class="alert {{ message_type }}">
                        {{ message }}
                    </div>
                    {% endif %}
                    
                    <form action="{{ url_for('profile_update') }}" method="post" class="profile-form" enctype="multipart/form-data">
                        <div class="form-group">
                            <label for="username">Username</label>
                            <input type="text" id="username" name="username" value="{{ user.username }}" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="email">Email Address</label>
                            <input type="email" id="email" name="email" value="{{ user.email }}" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="full_name">Full Name</label>
                            <input type="text" id="full_name" name="full_name" value="{{ user.full_name if user.full_name else '' }}">
                        </div>
                        
                        <div class="form-group">
                            <label for="bio">Bio</label>
                            <textarea id="bio" name="bio" rows="4">{{ user.bio if user.bio else '' }}</textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="location">Location</label>
                            <input type="text" id="location" name="location" value="{{ user.location if user.location else '' }}">
                        </div>
                        
                        <div class="form-group">
                            <label for="website">Website (Optional)</label>
                            <input type="text" id="website" name="website" value="{{ user.website or '' }}" placeholder="Your website URL">
                            <p class="form-help">Your personal website or social media profile.</p>
                        </div>
                        
                        <div class="form-group">
                            <label for="profile_pic">Profile Picture</label>
                            <input type="file" id="profile_pic" name="profile_pic" accept="image/*">
                            <p class="form-help">Upload a square image for best results. Maximum size: 5MB.</p>
                        </div>
                        
                        <div class="form-group">
                            <label for="profile_music">Profile Music</label>
                            <input type="file" id="profile_music" name="profile_music" accept="audio/mp3,audio/wav,audio/ogg,audio/m4a">
                            <p class="form-help">Upload music that will play when others visit your profile. Supported formats: MP3, WAV, OGG, M4A. Maximum size: 10MB.</p>
                            {% if user.profile_music %}
                            <div class="current-music">
                                <p>Current music: <span class="music-filename">{{ user.profile_music.split('/')[-1] }}</span></p>
                                <audio controls class="music-preview">
                                    <source src="{{ url_for('static', filename=user.profile_music) }}" type="audio/mpeg">
                                    Your browser does not support the audio element.
                                </audio>
                            </div>
                            {% endif %}
                        </div>
                        
                        <div class="form-actions">
                            <button type="submit" class="save-btn">Save Changes</button>
                            <button type="reset" class="cancel-btn">Cancel</button>
                        </div>
                    </form>
                </div>
                
                <div class="profile-section" id="security">
                    <h2>Security</h2>
                    <p class="section-description">Manage your password and security settings.</p>
                    
                    <form action="{{ url_for('change_password') }}" method="post" class="profile-form" id="password-form">
                        <div class="form-group">
                            <label for="current_password">Current Password</label>
                            <input type="password" id="current_password" name="current_password" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="new_password">New Password</label>
                            <input type="password" id="new_password" name="new_password" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="confirm_password">Confirm New Password</label>
                            <input type="password" id="confirm_password" name="confirm_password" required>
                        </div>
                        
                        <div class="form-actions">
                            <button type="submit" class="save-btn">Change Password</button>
                            <button type="reset" class="cancel-btn">Cancel</button>
                        </div>
                    </form>
                    
                    <div class="security-options">
                        <h3>Additional Security Options</h3>
                        
                        <div class="toggle-option">
                            <div class="toggle-info">
                                <h4>Two-Factor Authentication</h4>
                                <p>Add an extra layer of security to your account</p>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        
                        <div class="toggle-option">
                            <div class="toggle-info">
                                <h4>Login Notifications</h4>
                                <p>Get notified when someone logs into your account</p>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <div class="profile-section" id="team-info">
                    <h2>Team Information</h2>
                    <p class="section-description">View your team details and manage your team membership.</p>
                    
                    {% if user_team %}
                        <div class="team-info-card">
                            <div class="team-logo">
                                {% if user_team.logo %}
                                <img src="{{ url_for('static', filename=user_team.logo) }}" alt="{{ user_team.name }} logo">
                                {% else %}
                                <div class="default-logo">
                                    <i class="fas fa-users"></i>
                                </div>
                                {% endif %}
                            </div>
                            <div class="team-details">
                                <h3>{{ user_team.name }}</h3>
                                <p class="team-description">{{ user_team.description }}</p>
                                
                                <div class="team-stats">
                                    <div class="stat-item">
                                        <i class="fas fa-trophy"></i>
                                        <span>{{ user_team.points }} points</span>
                                    </div>
                                    <div class="stat-item">
                                        <i class="fas fa-user-friends"></i>
                                        <span>{{ user_team.member_count }} members</span>
                                    </div>
                                    {% if is_team_leader %}
                                    <div class="stat-item">
                                        <i class="fas fa-crown"></i>
                                        <span>Team Leader</span>
                                    </div>
                                    {% endif %}
                                </div>
                                
                                <div class="team-actions">
                                    <a href="{{ url_for('view_team', team_id=user_team.id) }}" class="btn primary">View Team</a>
                                    {% if is_team_leader %}
                                    <a href="{{ url_for('edit_team', team_id=user_team.id) }}" class="btn">Edit Team</a>
                                    <a href="{{ url_for('invite_to_team', team_id=user_team.id) }}" class="btn success">Invite Members</a>
                                    {% else %}
                                    <form action="{{ url_for('leave_team', team_id=user_team.id) }}" method="post" class="inline-form">
                                        <button type="submit" class="btn danger" onclick="return confirm('Are you sure you want to leave this team?')">Leave Team</button>
                                    </form>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    {% else %}
                        <div class="no-team-message">
                            <i class="fas fa-users"></i>
                            <p>You are not currently a member of any team.</p>
                            <a href="{{ url_for('teams') }}" class="btn primary">Browse Teams</a>
                        </div>
                    {% endif %}
                </div>
                
                <div class="profile-section" id="notifications">
                    <h2>Notifications</h2>
                    <p class="section-description">Manage your notification preferences.</p>
                    
                    <div class="notification-options">
                        <div class="toggle-option">
                            <div class="toggle-info">
                                <h4>Email Notifications</h4>
                                <p>Receive notifications via email</p>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        
                        <div class="toggle-option">
                            <div class="toggle-info">
                                <h4>Push Notifications</h4>
                                <p>Receive notifications on your device</p>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        
                        <div class="toggle-option">
                            <div class="toggle-info">
                                <h4>Marketing Emails</h4>
                                <p>Receive promotional emails and offers</p>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        
                        <div class="toggle-option">
                            <div class="toggle-info">
                                <h4>Account Updates</h4>
                                <p>Get notified about important account updates</p>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <div class="profile-section" id="privacy">
                    <h2>Privacy</h2>
                    <p class="section-description">Manage your privacy settings.</p>
                    
                    <div class="privacy-options">
                        <div class="toggle-option">
                            <div class="toggle-info">
                                <h4>Profile Visibility</h4>
                                <p>Make your profile visible to other users</p>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        
                        <div class="toggle-option">
                            <div class="toggle-info">
                                <h4>Show Email Address</h4>
                                <p>Allow others to see your email address</p>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        
                        <div class="toggle-option">
                            <div class="toggle-info">
                                <h4>Activity Status</h4>
                                <p>Show when you're active on the platform</p>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="danger-zone">
                        <h3>Danger Zone</h3>
                        <p>Permanent actions that cannot be undone</p>
                        
                        <div class="danger-actions">
                            <button class="danger-btn" id="deactivate-btn">
                                <i class="fas fa-user-slash"></i> Deactivate Account
                            </button>
                            <button class="danger-btn" id="delete-btn">
                                <i class="fas fa-trash-alt"></i> Delete Account
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Minecraft Tiers Section -->
                <div class="profile-section" id="minecraft-tiers">
                    <h2>Minecraft Skill Tiers</h2>
                    <p class="section-description">Set your skill levels for different gameplay aspects. These will be displayed on your public profile.</p>
                    
                    <div class="tier-explanation-box">
                        <div class="tier-format-guide">
                            <h3>Tier Format Guide</h3>
                            <div class="tier-examples">
                                <div class="tier-example">
                                    <span class="tier-label tier-lt1">LT1</span>
                                    <span class="tier-label tier-lt2">LT2</span>
                                    <span class="tier-label tier-lt3">LT3</span>
                                    <span class="tier-label tier-lt4">LT4</span>
                                    <span class="tier-label tier-lt5">LT5</span>
                                    <p>Lower Tier (LT) - Beginner to Intermediate skill level</p>
                                </div>
                                <div class="tier-example">
                                    <span class="tier-label tier-ht1">HT1</span>
                                    <span class="tier-label tier-ht2">HT2</span>
                                    <span class="tier-label tier-ht3">HT3</span>
                                    <span class="tier-label tier-ht4">HT4</span>
                                    <span class="tier-label tier-ht5">HT5</span>
                                    <p>Higher Tier (HT) - Advanced to Professional skill level</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <form action="{{ url_for('update_skill_tiers') }}" method="post" class="skill-tiers-form">
                        <div class="tier-input-section">
                            <h3>Enter Your Skill Tiers</h3>
                            <p>Enter your tier level using the format "LT1-5" or "HT1-5" for each game mode:</p>
                            
                            <div class="tier-input-grid">
                                {% if user_skills %}
                                    {% for skill in user_skills %}
                                    <div class="tier-input-row">
                                        <div class="tier-input-label">
                                            <img src="{{ url_for('static', filename=skill.icon_path) }}" alt="{{ skill.skill_name }}" class="tier-icon-small">
                                            <span>{{ skill.skill_name }}</span>
                                        </div>
                                        <div class="tier-input-field">
                                            <input type="text" name="{{ skill.skill_code }}_tier" value="{{ skill.tier_name or '' }}" 
                                                   pattern="(LT|HT)[1-5]" 
                                                   title="Please use format LT1-5 or HT1-5"
                                                   placeholder="e.g. LT3 or HT2">
                                        </div>
                                    </div>
                                    {% endfor %}
                                {% else %}
                                    <!-- Fallback to legacy tier system -->
                                    <div class="tier-input-row">
                                        <div class="tier-input-label">
                                            <img src="{{ url_for('static', filename='img/neth-op.svg') }}" alt="NPOT" class="tier-icon-small">
                                            <span>NPOT (Nether Pot)</span>
                                        </div>
                                        <div class="tier-input-field">
                                            <input type="text" name="npot_tier" value="{{ user.npot_tier or '' }}" 
                                                   pattern="(LT|HT)[1-5]" 
                                                   title="Please use format LT1-5 or HT1-5"
                                                   placeholder="e.g. LT3 or HT2">
                                        </div>
                                    </div>
                                    
                                    <div class="tier-input-row">
                                        <div class="tier-input-label">
                                            <img src="{{ url_for('static', filename='img/uhc.svg') }}" alt="UHC" class="tier-icon-small">
                                            <span>UHC (Ultra Hardcore)</span>
                                        </div>
                                        <div class="tier-input-field">
                                            <input type="text" name="uhc_tier" value="{{ user.uhc_tier or '' }}" 
                                                   pattern="(LT|HT)[1-5]" 
                                                   title="Please use format LT1-5 or HT1-5"
                                                   placeholder="e.g. LT3 or HT2">
                                        </div>
                                    </div>
                                    
                                    <div class="tier-input-row">
                                        <div class="tier-input-label">
                                            <img src="{{ url_for('static', filename='img/cpvp.svg') }}" alt="CPVP" class="tier-icon-small">
                                            <span>CPVP (Crystal PVP)</span>
                                        </div>
                                        <div class="tier-input-field">
                                            <input type="text" name="cpvp_tier" value="{{ user.cpvp_tier or '' }}" 
                                                   pattern="(LT|HT)[1-5]" 
                                                   title="Please use format LT1-5 or HT1-5"
                                                   placeholder="e.g. LT3 or HT2">
                                        </div>
                                    </div>
                                    
                                    <div class="tier-input-row">
                                        <div class="tier-input-label">
                                            <img src="{{ url_for('static', filename='img/sword.svg') }}" alt="SWORD" class="tier-icon-small">
                                            <span>SWORD (Sword Combat)</span>
                                        </div>
                                        <div class="tier-input-field">
                                            <input type="text" name="sword_tier" value="{{ user.sword_tier or '' }}" 
                                                   pattern="(LT|HT)[1-5]" 
                                                   title="Please use format LT1-5 or HT1-5"
                                                   placeholder="e.g. LT3 or HT2">
                                        </div>
                                    </div>
                                    
                                    <div class="tier-input-row">
                                        <div class="tier-input-label">
                                            <img src="{{ url_for('static', filename='img/axe.svg') }}" alt="AXE" class="tier-icon-small">
                                            <span>AXE (Axe Combat)</span>
                                        </div>
                                        <div class="tier-input-field">
                                            <input type="text" name="axe_tier" value="{{ user.axe_tier or '' }}" 
                                                   pattern="(LT|HT)[1-5]" 
                                                   title="Please use format LT1-5 or HT1-5"
                                                   placeholder="e.g. LT3 or HT2">
                                        </div>
                                    </div>
                                    
                                    <div class="tier-input-row">
                                        <div class="tier-input-label">
                                            <img src="{{ url_for('static', filename='img/smp.svg') }}" alt="SMP" class="tier-icon-small">
                                            <span>SMP (Survival Multiplayer)</span>
                                        </div>
                                        <div class="tier-input-field">
                                            <input type="text" name="smp_tier" value="{{ user.smp_tier or '' }}" 
                                                   pattern="(LT|HT)[1-5]" 
                                                   title="Please use format LT1-5 or HT1-5"
                                                   placeholder="e.g. LT3 or HT2">
                                        </div>
                                    </div>
                                {% endif %}
                            </div>
                            
                            <div class="form-actions">
                                <button type="submit" class="cosmic-btn primary">Save Tiers</button>
                            </div>
                        </div>
                        
                        <div class="quick-tier-selection">
                            <h3>Alternative: Select Your Skill Tiers</h3>
                            <p>Or choose the tier that best represents your skill level for each game mode:</p>
                            
                            <div class="quick-tier-grid">
                                <div class="quick-tier-row">
                                    <div class="quick-tier-cell header-cell">Game Mode</div>
                                    <div class="quick-tier-cell header-cell">LT1</div>
                                    <div class="quick-tier-cell header-cell">LT2</div>
                                    <div class="quick-tier-cell header-cell">LT3</div>
                                    <div class="quick-tier-cell header-cell">LT4</div>
                                    <div class="quick-tier-cell header-cell">LT5</div>
                                    <div class="quick-tier-cell header-cell">HT1</div>
                                    <div class="quick-tier-cell header-cell">HT2</div>
                                    <div class="quick-tier-cell header-cell">HT3</div>
                                    <div class="quick-tier-cell header-cell">HT4</div>
                                    <div class="quick-tier-cell header-cell">HT5</div>
                                </div>
                                
                                {% if user_skills %}
                                    {% for skill in user_skills %}
                                    <div class="quick-tier-row" data-skill="{{ skill.skill_code }}">
                                        <div class="quick-tier-cell">{{ skill.skill_name }}</div>
                                        <div class="quick-tier-cell">
                                            <input type="radio" name="{{ skill.skill_code }}_tier_radio" value="LT1" 
                                                  {% if skill.tier_name == 'LT1' %}checked{% endif %} 
                                                  onclick="document.getElementsByName('{{ skill.skill_code }}_tier')[0].value='LT1'">
                                        </div>
                                        <div class="quick-tier-cell">
                                            <input type="radio" name="{{ skill.skill_code }}_tier_radio" value="LT2" 
                                                  {% if skill.tier_name == 'LT2' %}checked{% endif %} 
                                                  onclick="document.getElementsByName('{{ skill.skill_code }}_tier')[0].value='LT2'">
                                        </div>
                                        <div class="quick-tier-cell">
                                            <input type="radio" name="{{ skill.skill_code }}_tier_radio" value="LT3" 
                                                  {% if skill.tier_name == 'LT3' %}checked{% endif %} 
                                                  onclick="document.getElementsByName('{{ skill.skill_code }}_tier')[0].value='LT3'">
                                        </div>
                                        <div class="quick-tier-cell">
                                            <input type="radio" name="{{ skill.skill_code }}_tier_radio" value="LT4" 
                                                  {% if skill.tier_name == 'LT4' %}checked{% endif %} 
                                                  onclick="document.getElementsByName('{{ skill.skill_code }}_tier')[0].value='LT4'">
                                        </div>
                                        <div class="quick-tier-cell">
                                            <input type="radio" name="{{ skill.skill_code }}_tier_radio" value="LT5" 
                                                  {% if skill.tier_name == 'LT5' %}checked{% endif %} 
                                                  onclick="document.getElementsByName('{{ skill.skill_code }}_tier')[0].value='LT5'">
                                        </div>
                                        <div class="quick-tier-cell">
                                            <input type="radio" name="{{ skill.skill_code }}_tier_radio" value="HT1" 
                                                  {% if skill.tier_name == 'HT1' %}checked{% endif %} 
                                                  onclick="document.getElementsByName('{{ skill.skill_code }}_tier')[0].value='HT1'">
                                        </div>
                                        <div class="quick-tier-cell">
                                            <input type="radio" name="{{ skill.skill_code }}_tier_radio" value="HT2" 
                                                  {% if skill.tier_name == 'HT2' %}checked{% endif %} 
                                                  onclick="document.getElementsByName('{{ skill.skill_code }}_tier')[0].value='HT2'">
                                        </div>
                                        <div class="quick-tier-cell">
                                            <input type="radio" name="{{ skill.skill_code }}_tier_radio" value="HT3" 
                                                  {% if skill.tier_name == 'HT3' %}checked{% endif %} 
                                                  onclick="document.getElementsByName('{{ skill.skill_code }}_tier')[0].value='HT3'">
                                        </div>
                                        <div class="quick-tier-cell">
                                            <input type="radio" name="{{ skill.skill_code }}_tier_radio" value="HT4" 
                                                  {% if skill.tier_name == 'HT4' %}checked{% endif %} 
                                                  onclick="document.getElementsByName('{{ skill.skill_code }}_tier')[0].value='HT4'">
                                        </div>
                                        <div class="quick-tier-cell">
                                            <input type="radio" name="{{ skill.skill_code }}_tier_radio" value="HT5" 
                                                  {% if skill.tier_name == 'HT5' %}checked{% endif %} 
                                                  onclick="document.getElementsByName('{{ skill.skill_code }}_tier')[0].value='HT5'">
                                        </div>
                                    </div>
                                    {% endfor %}
                                {% else %}
                                    <!-- Fallback to legacy tier system -->
                                    <!-- ... legacy quick tier selection code ... -->
                                {% endif %}
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="footer-content">
            <div class="footer-logo">
                <h2>Cosmic<span>Teams</span></h2>
                <p>Your awesome web experience</p>
            </div>
            <div class="footer-links">
                <h3>Quick Links</h3>
                <ul>
                    <li><a href="{{ url_for('main') }}">Home</a></li>
                    <li><a href="{{ url_for('teams') }}">Teams</a></li>
                    <li><a href="{{ url_for('about') }}">About</a></li>
                    <li><a href="{{ url_for('profile') }}">Profile</a></li>
                </ul>
            </div>
            <div class="footer-social">
                <h3>Connect With Us</h3>
                <div class="social-icons">
                    <a href="#"><i class="fab fa-facebook"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-linkedin"></i></a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 CosmicTeams. All rights reserved.</p>
        </div>
    </footer>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
    <script src="{{ url_for('static', filename='js/profile.js') }}"></script>
    <script src="{{ url_for('static', filename='js/loaders.js') }}"></script>
    
    <script>
        // Script to validate tier inputs
        document.addEventListener('DOMContentLoaded', function() {
            const tierInputs = document.querySelectorAll('input[name$="_tier"]');
            const tierPattern = /(LT|HT)[1-5]/;
            
            tierInputs.forEach(input => {
                // Real-time validation
                input.addEventListener('input', function() {
                    const value = this.value.trim().toUpperCase();
                    if (value === '' || tierPattern.test(value)) {
                        this.classList.remove('invalid');
                        // Update the tier display dynamically
                        if (value) {
                            // Convert the input to uppercase
                            this.value = value;
                        }
                    } else {
                        this.classList.add('invalid');
                    }
                });
                
                // Convert to uppercase on blur
                input.addEventListener('blur', function() {
                    const value = this.value.trim();
                    if (value) {
                        this.value = value.toUpperCase();
                    }
                });
            });
            
            // Form submission validation
            document.querySelector('.skill-tiers-form').addEventListener('submit', function(e) {
                let isValid = true;
                
                tierInputs.forEach(input => {
                    const value = input.value.trim();
                    if (value !== '' && !tierPattern.test(value.toUpperCase())) {
                        input.classList.add('invalid');
                        isValid = false;
                    }
                });
                
                if (!isValid) {
                    e.preventDefault();
                    alert('Please use the correct tier format: LT1-5 or HT1-5');
                }
            });
        });
    </script>
</body>
</html>
{% endblock %} 